#include "Adafruit_TCS34725.h"
#include <Servo.h>
Servo myservo;
int ug=0; 
// Инициализация модуля с установками времени интеграции и усиления
Adafruit_TCS34725 tcs = Adafruit_TCS34725(TCS34725_INTEGRATIONTIME_50MS, TCS34725_GAIN_4X);
 
void setup() 
{
    // Инициализация последовательной связи для вывода данных
    Serial.begin(9600);
    Serial.println("Hello, World!");
    myservo.attach(9);
    // Проверка наличия модуля TCS34725
    if (tcs.begin()) {
        Serial.println("Датчик найден!"); // Если модуль найден, вывод сообщения
    } else {
        Serial.println("Дачик TCS34725 не найден ... проверьте соединение"); // Если модуль не найден, вывод сообщения и остановка работы
        while (1);
    }
}
 
void loop() 
{
    uint16_t r, g, b, c, colorTemp, lux;
 
    // Получение данных о цвете с модуля
    tcs.getRawData(&r, &g, &b, &c);
    
    // Расчет температуры цвета и уровня освещенности
    colorTemp = tcs.calculateColorTemperature(r, g, b);
    lux = tcs.calculateLux(r, g, b);
    if (r>30){
      myservo.write(0);
      delay(1000);
      myservo.write(180);
      delay(1000);
    }
    
      
    // Вывод данных о цвете и освещенности в последовательный порт
    Serial.print("Color Temp: "); Serial.print(colorTemp, DEC); Serial.print(" K - ");
    Serial.print("Lux: "); Serial.print(lux, DEC); Serial.print(" - ");
    Serial.print("R: "); Serial.print(r, DEC); Serial.print(" ");
    Serial.print("G: "); Serial.print(g, DEC); Serial.print(" ");
    Serial.print("B: "); Serial.print(b, DEC); Serial.print(" ");
    Serial.print("C: "); Serial.print(c, DEC);
    Serial.println(" ");
 
    delay(500); // Задержка для стабильного вывода данных
}
